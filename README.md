# ü¶û Clawdbot on Render

Deploy **Clawdbot** on **Render** with a built-in installer and a proxied Control UI (including WebSockets).

[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy?repo=https://github.com/ojusave/render_clawdbot)

`https://docs.clawd.bot` ¬∑ `https://github.com/clawdbot/clawdbot`

## UI preview

<img src="public/UI%20-1.png" alt="Clawdbot on Render UI (preview 1)" width="900" />

<img src="public/UI%20-%202%20.png" alt="Clawdbot on Render UI (preview 2)" width="900" />

## What you get

- **Install Wizard** at `/install` (password protected)
- **Control UI** at `/` and `/clawdbot` (reverse-proxied, including WebSockets)
- **Persistent disk** mounted at `/data` for state + workspace
- **Export / Import backups** to migrate deployments

## Deploy (Blueprint)

- **Plan requirement**: this Blueprint targets Render‚Äôs **Standard** plan (paid) because it uses a **persistent disk** at `/data`. See: `https://docs.render.com/pricing#services`.

1) Click **Deploy to Render**.
2) Render detects `render.yaml` and creates the web service + disk.
3) When prompted, set:
   - `RENDER_SETUP_PASSWORD` (required)
4) After deploy:
   - Open installer: `https://<your-service>.onrender.com/install`
   - Open UI: `https://<your-service>.onrender.com/` or `/clawdbot`

## Installer password (`RENDER_SETUP_PASSWORD`)

`/install` uses **HTTP Basic Auth**.

- **Username**: anything
- **Password**: the value of `RENDER_SETUP_PASSWORD`

## Persistence

This template stores state and workspace on the persistent disk:

- `CLAWDBOT_STATE_DIR=/data/.clawdbot`
- `CLAWDBOT_WORKSPACE_DIR=/data/workspace`

## Backups

- **Download**: `GET /install/export` (Basic Auth) ‚Üí `.tar.gz`
- **Upload**: `POST /install/api/import` (Basic Auth) ‚Üí restores `.clawdbot/` + `workspace/` into `/data`

## Environment variables

- **Required**
  - `RENDER_SETUP_PASSWORD`: protects `/install`
- **Generated by Blueprint**
  - `RENDER_GATEWAY_TOKEN`: gateway admin token used by the Control UI (auto-generated in `render.yaml`)
- **Optional (advanced)**
  - `CLAWDBOT_GIT_REF`: Docker build arg to pin the Clawdbot version (tag/branch/commit)
- **Optional (branding)**
  - `RENDER_LOGO_FILE`: filename inside `public/` to show in the header (default: `Render logo - Black.jpg`)
  - `RENDER_DEPLOY_URL`: URL used by the ‚ÄúDeploy on Render‚Äù button (default: `https://render.com/deploy?repo=https://github.com/ojusave/render_clawdbot`)
- **Optional (gateway startup tolerance)**
  - `GATEWAY_READY_TIMEOUT_MS` (default `60000`)
  - `GATEWAY_READY_PATH` (default `/healthz`)
  - `GATEWAY_READY_POLL_MS` (default `300`)
  - `GATEWAY_READY_REQ_TIMEOUT_MS` (default `2000`)

## Troubleshooting

- **WebSocket closes (code 1008) / ‚Äúproxy headers detected‚Äù**: this wrapper strips `Forwarded` / `X-Forwarded-*` headers when proxying to the internal loopback gateway, because forwarding them can make local clients appear ‚Äúremote behind an untrusted proxy‚Äù.

## Contributing

Fixes and improvements are welcome. See `CONTRIBUTING.md`.

## License

MIT. See `LICENSE`.

