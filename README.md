# ðŸ¦ž Clawdbot on Render

Deploy **Clawdbot** on **Render** with a built-in installer and a proxied Control UI (including WebSockets).

[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy?repo=https://github.com/ojusave/render_clawdbot)

`https://docs.clawd.bot` Â· `https://github.com/clawdbot/clawdbot`

## UI preview

<img src="public/UI%20-1.png" alt="Clawdbot on Render UI (preview 1)" width="900" />

<img src="public/UI%20-%202%20.png" alt="Clawdbot on Render UI (preview 2)" width="900" />

## What you get

- **Install Wizard** at `/install` (password protected)
- **Control UI** at `/` and `/clawdbot` (reverse-proxied, including WebSockets)
- **Persistent disk** mounted at `/data` for state + workspace
- **Export / Import backups** to migrate deployments

## Installation

**Plan requirement**: This Blueprint targets Render's **Standard** plan (paid) because it uses a **persistent disk** at `/data`. See: `https://docs.render.com/pricing#services`.

1. Click the **Deploy to Render** button above.
2. Render will detect `render.yaml` and automatically create the web service and persistent disk.
3. When prompted during deployment, set the required environment variable:
   - `RENDER_SETUP_PASSWORD`: Choose a secure password to protect the installer (required)
4. Wait for the deployment to complete. Render will automatically generate `RENDER_GATEWAY_TOKEN` for you.

## Configuration

After deployment, you need to configure Clawdbot using the install wizard:

1. **Access the installer**: Navigate to `https://<your-service>.onrender.com/install`
2. **Authenticate**: The installer uses HTTP Basic Auth:
   - **Username**: any value (can be left blank)
   - **Password**: the value you set for `RENDER_SETUP_PASSWORD`
3. **Complete the setup**: Follow the install wizard to configure Clawdbot:
   - Select your authentication group and method
   - Configure any required settings
   - The installer will set up Clawdbot with your preferences

## Usage

Once configured, you can access and use Clawdbot:

- **Control UI**: Navigate to `https://<your-service>.onrender.com/` or `https://<your-service>.onrender.com/clawdbot`
- The Control UI is reverse-proxied and includes full WebSocket support
- All state and workspace data is persisted on the disk at `/data`

## Persistence

This template stores state and workspace on the persistent disk:

- `CLAWDBOT_STATE_DIR=/data/.clawdbot`
- `CLAWDBOT_WORKSPACE_DIR=/data/workspace`

## Backups

- **Download**: `GET /install/export` (Basic Auth) â†’ `.tar.gz`
- **Upload**: `POST /install/api/import` (Basic Auth) â†’ restores `.clawdbot/` + `workspace/` into `/data`

## Environment variables

- **Required**
  - `RENDER_SETUP_PASSWORD`: protects `/install`
- **Generated by Blueprint**
  - `RENDER_GATEWAY_TOKEN`: gateway admin token used by the Control UI (auto-generated in `render.yaml`)
- **Optional (advanced)**
  - `CLAWDBOT_GIT_REF`: Docker build arg to pin the Clawdbot version (tag/branch/commit)
- **Optional (branding)**
  - `RENDER_LOGO_FILE`: filename inside `public/` to show in the header (default: `Render logo - Black.jpg`)
  - `RENDER_DEPLOY_URL`: URL used by the "Deploy on Render" button (default: `https://render.com/deploy?repo=https://github.com/ojusave/render_clawdbot`)
- **Optional (gateway startup tolerance)**
  - `GATEWAY_READY_TIMEOUT_MS` (default `60000`)
  - `GATEWAY_READY_PATH` (default `/healthz`)
  - `GATEWAY_READY_POLL_MS` (default `300`)
  - `GATEWAY_READY_REQ_TIMEOUT_MS` (default `2000`)

## Troubleshooting

- **WebSocket closes (code 1008) / "proxy headers detected"**: this wrapper strips `Forwarded` / `X-Forwarded-*` headers when proxying to the internal loopback gateway, because forwarding them can make local clients appear "remote behind an untrusted proxy".

## Contributing

Fixes and improvements are welcome. See `CONTRIBUTING.md`.

## License

MIT. See `LICENSE`.
